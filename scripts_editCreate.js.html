<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: scripts/editCreate.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: scripts/editCreate.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// This script will take the user's input with their recipe data in editCreate.html, and will send it to the server to be saved.
window.addEventListener("DOMContentLoaded", init);

const url = "http://127.0.0.1:3030/api"

function init() {
    console.log("editCreate.js init called");

    // Adding steps to the recipe
    /* eslint-disable no-unused-vars*/
    const addStepButton = document.querySelector("#addSteps button");
    /* eslint-enable no-unused-vars*/
    //addStepButton.addEventListener('click', appendRow);

    // Submitting the entire recipe
    const recipeForm = document.getElementById("recipeForm");
    recipeForm.onsubmit = onSubmitRecipe;
}

const onSubmitRecipe = async (event) => {
    console.log("SUBMITTED THINGY");
    event.preventDefault();
    event.preventDefault();
    console.log("SUBMITTED THINGY");
    const recipeF = document.getElementById("recipeForm");
    let formData = new FormData(recipeF);
    /** 
    console.log(formData.get('name'));
    console.log(formData.get('picture'));
    console.log(formData.get('description'));
    console.log(formData.get('tags'));
    console.log(formData.get('prepTime'));
    console.log(formData.get('cookTime'));
    console.log(formData.get('servingSize'));
    console.log(formData.get('difficulty'));
    console.log(formData.get('ingredients'));
    console.log(formData.get('ingredientAmounts'));
    console.log(formData.get('steps'));
    */
    const recipeCard = document.createElement('recipe-card');
    // recipeCard.dat
    // const recClass = new RecipeClass();
    recipeCard.name = formData.get('name');
    recipeCard.authorId = 'HZRfg63gUu5M8S0F';
    recipeCard.datePosted = Date.now();
    recipeCard.coverImage = formData.get('picture');
    recipeCard.cookingTime = formData.get('cookTime');
    //recClass.servingSize =
    recipeCard.difficulty = formData.get('difficulty');
    recipeCard.tags = formData.get('tags');
    //recClass.ingredients =formData.get('ingredients');
    //recClass.steps = formData.get('steps');

    let newRecipe = {
        name: formData.get('name'), datePosted: Date.now(),
        cookTime: formData.get('cookTime'),
        author: "HZRfg63gUu5M8S0F", steps: ["step 1", "step 2"]
    }
    console.log(newRecipe)

    //for update, change the method of PUT
    let response = await fetch(url, {
        method: 'POST', // *GET, POST, PUT, DELETE, etc.
        body: JSON.stringify(newRecipe) // body data type must match "Content-Type" header
    }).then((response) => response.json())
        .then((data) => {
            // This grabs the data return by the server
            return data
        })
        .catch((err) => {
            console.log(`Error loading the ${recipe} recipe`);
            reject(err);
        });
    //the recipe object received from backend server

    console.log(response)

};

let numSteps = 1;
/* eslint-disable no-unused-vars*/
const appendStep = () => {
    //let d = document.getElementById('steps');
    // d.innerHTML += "&lt;input type='text' id='tst"+ x++ +"'>&lt;br >";
    var newTextBox = document.createElement("div");
    newTextBox.innerHTML =
        "&lt;textarea cols='40' rows='4' id='textAreaBox' placeholder='Step #" +
        numSteps +
        "'>&lt;/textarea>";
    document.getElementById("newStepId").appendChild(newTextBox);
    numSteps++;
};
/* eslint-enable no-unused-vars*/

/* eslint-disable no-unused-vars*/
const deleteStep = () => {
    //newTextBox.classList.add('stepEntry');
    if (document.getElementById("newStepId").lastChild != null) {
        document
            .getElementById("newStepId")
            .removeChild(document.getElementById("newStepId").lastChild);
        numSteps--;
    }
};
/* eslint-enable no-unused-vars*/

/* eslint-disable no-unused-vars*/
const appendIngredient = () => {
    var newTextBox = document.createElement("div");
    newTextBox.innerHTML =
        "&lt;input type='text' id='newInputBox' placeholder='ingredient'>";
    document.getElementById("newIngredientId").appendChild(newTextBox);

    var newAmountBox = document.createElement("div");
    newAmountBox.innerHTML =
        "&lt;input type='text' id='newInputBox' placeholder='amount'>";
    document.getElementById("newIngredientAmountId").appendChild(newAmountBox);
};
/* eslint-enable no-unused-vars*/

/* eslint-disable no-unused-vars*/
const deleteIngredient = () => {
    if (document.getElementById("newIngredientId").lastChild != null) {
        document
            .getElementById("newIngredientId")
            .removeChild(document.getElementById("newIngredientId").lastChild);
        document
            .getElementById("newIngredientAmountId")
            .removeChild(
                document.getElementById("newIngredientAmountId").lastChild
            );
    }
};
/* eslint-enable no-unused-vars*/
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#convertTime">convertTime</a></li><li><a href="global.html#createNewUser">createNewUser</a></li><li><a href="global.html#createRecipeCards">createRecipeCards</a></li><li><a href="global.html#getAuthor">getAuthor</a></li><li><a href="global.html#getCategories">getCategories</a></li><li><a href="global.html#getDescription">getDescription</a></li><li><a href="global.html#getHelloWorld">getHelloWorld</a></li><li><a href="global.html#getImage">getImage</a></li><li><a href="global.html#getIngredients">getIngredients</a></li><li><a href="global.html#getInstructions">getInstructions</a></li><li><a href="global.html#getName">getName</a></li><li><a href="global.html#getOrganization">getOrganization</a></li><li><a href="global.html#getSteps">getSteps</a></li><li><a href="global.html#getTags">getTags</a></li><li><a href="global.html#getTitle">getTitle</a></li><li><a href="global.html#getUrl">getUrl</a></li><li><a href="global.html#getYield">getYield</a></li><li><a href="global.html#hasUser">hasUser</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#onSignIn">onSignIn</a></li><li><a href="global.html#searchForKey">searchForKey</a></li><li><a href="global.html#signOut">signOut</a></li><li><a href="global.html#submitSearch">submitSearch</a></li><li><a href="global.html#userSignedOut">userSignedOut</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Wed Nov 24 2021 03:34:37 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
